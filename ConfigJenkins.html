<!DOCTYPE HTML>
<html>
	<head>
		<title>Configuracion-Jenkins</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<a href="index.html" class="logo"><strong>Configuracion Jenkins</strong></a>
									<ul class="icons">
										<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
										<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
										<li><a href="#" class="icon fa-snapchat-ghost"><span class="label">Snapchat</span></a></li>
										<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
										<li><a href="#" class="icon fa-medium"><span class="label">Medium</span></a></li>
									</ul>
								</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h1>Jenkins Config.</h1>
									</header>



									<span class="image main"><img src="images/799px-Jenkins_logo_with_title.svg.png" width="520px" height="auto" alt="" /></span>

									<hr class="major" />

									<h2>Instalación</h2>
									<p>Fedora:</p>
									<p>yum update</p>
									<p>yum install jenkins</p>

									<hr class="major" />
                                    
                                    <h2>Plugins utilizados</h2>
									<p>
                                    <ul>
                                    	<li>Git</li>
                                        <li>Gitlab</li>
                                        <li>Nodejs</li>
                                        <li>Sonarqube</li>
                                    </ul>
                                    </p>
                                    
									<hr class="major" />

									<h2>Primeros pasos...</h2>
									<p>Al acceder a Jenkins, una vez teniendo en mano el acces token que se genero desde <strong>Gitlab</strong> es necesario agregar la credencial de acceso para su exitosa comunicación y de esta manera lograr la conexión de ambos. De esta manera sera agregada esta configuracion tal cual lo muestran las imagenes siguientes...</p>
                                    <p>Nos dirigimos al apartado de credenciales</p>
                                    <span class="image">
                                    <img src="images/1490713862_55_GitLab-Jenkins-una-integración-de-gran-alcance.png" width="100%" height="auto" />
                                    </span>
                                    
									<hr class="major" />

									<h2>Agregar Token</h2>
									<p>El token obtenido en gitlab es necesario para esta parte ya que es el acceso a jenkins desde gitlab para asi realizar la conexion de ambas tecnologias, en este apartado es recomendable colocar un ID y descripcion de que tipo es esta credencial ya que manejaremos diversas credenciales.</p>
                                    <span class="image">
                                    <img src="images/token.png" width="100%" height="auto" />
                                    </span>
                                    
                                    <br/>
                                    
                                    <p><strong>Debe dar una credencial asi como el ejemplo:</strong></p>
                                    
                                    <span class="image">
                                    <img src="images/tokenAsign.png" width="100%" height="auto" />
                                    </span>
                                    
									<hr class="major" />

									<h2>Configuracion-Jenkins-gitlab</h2>
									<p>Nos dirigimos al apartado de [Aministrar Jenkins] --> [Configurar Sistema] --> [Gitlab] </p>
									<p>En la opcion credentials debe ser la agregada anteriormente.</p>

									<span class="image">
										<img src="images/configGit.png" width="100%" height="auto" />
									</span>

									<hr class="major" />

									<h2>Agregar un espacio de trabajo.</h2>
									
									<p>Regresamos al dashboard de jenkins, es hora de crear una nueva tarea.</p>
									<span class="image">
										<img src="images/Selección_001.png" width="100%" height="auto" />
									</span>
									
									<p>Creada la tarea nos mandara a configurar los procesos de jenkins en el proyecto. 
										<br/>
										En la pestaña General aparecera en Gitlab Connection la credencial por default antes agregada.
									</p>
									<span class="image">
										<img src="images/Selección_002.png" width="100%" height="auto" />
									</span>

									<p>En la pestaña triggers solo debe seleccionarse la casilla: 
										<br/>
										<strong>Build when a change is pushed to GitLab. GitLab webhook URL: http://172.17.0.1:8080/project/spring (Nota: El link varia depende el host en el que este montado)</strong>
										<br/>
									   Es importante tomar en cuenta esta URL y el token que se genera, ya que estas seran ingresadas en la configuración del proyecto guardado en Gitlab 
									</p>
									<span class="image">
										<img src="images/Selección_003.png" width="100%" height="auto" />
									</span>

									<p>La configuracion de estas debe estar en Gitlab ubicados en nuestro proyecto, en el cual es necesario ir a [Settings] ---> [Integrations]</p>
									<span class="image">
										<img src="images/Selección_004.png" width="100%" height="auto" />
									</span>
									<p>Una vez dentro de esta opción tendremos que copiar y pegar la URL y el Token obtenidos para crear el Webhook correspondiente para que se genere la conexion y ejecute el pipeline que debe estar dentro de nuestro proyecto.</p>
									<span class="image">
										<img src="images/Selección_006.png" width="100%" height="auto" />
									</span>
									<p>Pulsamos en <strong>Add Webhook</strong> para guardar nuestro puente de conexión, el cual nos servira al momento de realizar un commit y push jenkins de esta manera pueda detectar que hubo cambios y comienze a ejecutar el Jenkinsfile (Pipeline).</p>
									<h2>Regresamos a la terminación de configuracion</h2>
									<p>El siguiente paso es simplemente <strong>Guardar</strong> las configuraciones.</p>
									<span class="image">
										<img src="images/Selección_007.png" width="100%" height="auto" />
									</span>

									<h2>Ejemplo de Pipeline para proyecto Spring boot <img src="images/pipe.png" width="30px" height="30px"/></h2>
									<span class="image">
										<img src="images/pipeline.png" width="100%" height="auto" />
									</span>
									
									<p>Una vez hecho un push comenzara a ejecutar los pasos establecidos en el Jenkinsfile si es todo correcto pintara el Stage View en verde pero en caso de algun fallo debera mandarlo de color Rojo.</p>
									<span class="image">
										<img src="images/captura.png" width="100%" height="auto" />
									</span>

								</section>

						</div>
					</div>

				<!-- Sidebar -->
					<div id="sidebar">
						<div class="inner">

							<!-- Search -->
								<section id="search" class="alt">
									<form method="post" action="#">
										<input type="text" name="query" id="query" placeholder="Search" />
									</form>
								</section>

							<!-- Menu -->
								<nav id="menu">
									<header class="major">
										<h2>Menu</h2>
									</header>
									<ul>
										<li><a href="index.html">Inicio</a></li>
										<li><a href="#">Manual completo</a></li>
										<!--<li><a href="elements.html"></a></li>-->
										<li>
											<span class="opener">Entrar a Portales CI|CD</span>
											<ul>
												<li><a href="http://10.51.251.148:9000">Portainer</a></li>
												<li><a href="http://10.51.251.148:8081">Sonatype Nexus</a></li>
												<li><a href="http://10.51.251.148:8080">Jenkins</a></li>
												<li><a href="http://10.51.251.150:9997">Gitlab</a></li>
											</ul>
										</li>
									</ul>
								</nav>
                                
							<!-- Section 
								<section>
									<header class="major">
										<h2>Ante interdum</h2>
									</header>
									<div class="mini-posts">
										<article>
											<a href="#" class="image"><img src="images/pic07.jpg" alt="" /></a>
											<p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
										</article>
										<article>
											<a href="#" class="image"><img src="images/pic08.jpg" alt="" /></a>
											<p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
										</article>
										<article>
											<a href="#" class="image"><img src="images/pic09.jpg" alt="" /></a>
											<p>Aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore aliquam.</p>
										</article>
									</div>
									<ul class="actions">
										<li><a href="#" class="button">More</a></li>
									</ul>
								</section>
                                -->

							<!-- Section -->
								<section>
									<header class="major">
										<h2>Contacto</h2>
									</header>
									<p></p>
									<ul class="contact">
										<li class="fa-envelope-o"><a href="#">christian.sayago@elektra.com.mx</a></li>
										<li class="fa-phone">(55) 21-00-83-83</li>
										<li class="fa-home">Torre Jade<br />
										</li>
									</ul>
								</section>

							<!-- Footer -->
								<footer id="footer">
									<p class="copyright">&copy; Grupo Salinas. All rights reserved. Design: <a href="#">Banco Azteca</a>.</p>
								</footer>

						</div>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>